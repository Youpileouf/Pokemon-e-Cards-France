#include <pksm.h>
#include <stdlib.h>

//Rubis, Saphir

char baie_haye_RS1[32] = {
	0xC2, 0xBB, 0xD3, 0xBF, 0xFF, 0xC5, 0xFF, 0x03, 0xF9, 0x00, 0x02, 0x01, 0x50, 0x8D, 0x02, 0x02,// offset = 0x2E0
	0x7D, 0x8D, 0x02, 0x02, 0x01, 0x00, 0x1E, 0x00, 0x1E, 0x00, 0x55, 0x00, 0x00, 0x00, 0x00, 0x00
};

//	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
//	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
//	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,

char baie_haye_RS2[80] = {
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x60, 0x00, 0x00, 0x00, 0x00,//5*16 = 80 = 0x50
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x60, 0x66, 0x00, 0x00, 0x26, 0x32,// offset = 0x330
	0x00, 0x00, 0x26, 0x48, 0x00, 0x00, 0x26, 0x36, 0x66, 0x00, 0x27, 0x32, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x08, 0x00, 0x00, 0x00,
	0x83, 0x00, 0x00, 0x00, 0x83, 0x00, 0x00, 0x88, 0x83, 0x00, 0x80, 0x53, 0x00, 0x00, 0x00, 0x00
};

//	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,

char baie_haye_RS3[16] = {
	0x00, 0x00, 0x00, 0x00, 0x08, 0x00, 0x00, 0x00, 0x86, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 //11*16 = 176 = 0xB0
};													// offset = 0x390

//	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
//	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
//	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,

char baie_haye_RS4[128] = {
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x36,//15*16 = 240 = 0xF0
	0x00, 0x00, 0x00, 0x36, 0x00, 0x00, 0x00, 0x36, 0x00, 0x00, 0x00, 0x60, 0x00, 0x00, 0x00, 0x00,// offset = 0x3D0
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x33, 0x06, 0x60, 0x33,
	0x38, 0x63, 0x70, 0x43, 0x36, 0x43, 0x76, 0x43, 0x33, 0x33, 0x74, 0x44, 0x36, 0x33, 0x44, 0x47,
	0x36, 0x33, 0x44, 0x47, 0x60, 0x33, 0x43, 0x47, 0x60, 0x33, 0x43, 0x47, 0x44, 0x08, 0x38, 0x86,
	0x44, 0x88, 0x43, 0x65, 0x44, 0x86, 0x54, 0x55, 0x44, 0x84, 0x55, 0x65, 0x44, 0x74, 0x55, 0x86,
	0x44, 0x54, 0x55, 0x86, 0x44, 0x54, 0x65, 0x08, 0x44, 0x54, 0x65, 0x08, 0x86, 0x00, 0x00, 0x00,
	0x86, 0x00, 0x00, 0x00, 0x08, 0x00, 0x00, 0x00, 0x08, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
};

//	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
//	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
//	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
//	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,

char baie_haye_RS5[144] = {
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x70, 0x00, 0x00, 0x00, 0x00,//27*16 = 432 = 0x1B0
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x60, 0x00, 0x00, 0x60, 0x36,// offset = 0x490
	0x00, 0x00, 0x36, 0x33, 0x70, 0x77, 0x77, 0x43, 0x23, 0x22, 0x32, 0x37, 0x00, 0x36, 0x43, 0x44,
	0x00, 0x36, 0x43, 0x44, 0x00, 0x37, 0x43, 0x44, 0x66, 0x37, 0x43, 0x44, 0x44, 0x57, 0x43, 0x44,
	0x44, 0x64, 0x43, 0x44, 0x44, 0x64, 0x44, 0x44, 0x44, 0x44, 0x44, 0x54, 0x44, 0x54, 0x85, 0x00,
	0x44, 0x55, 0x85, 0x00, 0x44, 0x55, 0x85, 0x00, 0x44, 0x55, 0x86, 0x88, 0x54, 0x55, 0x86, 0x77,
	0x54, 0x55, 0x76, 0x77, 0x54, 0x65, 0x76, 0x77, 0x55, 0x65, 0x77, 0x77, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x08, 0x00, 0x00, 0x00, 0x87, 0x08, 0x00, 0x00,
	0x77, 0x87, 0x00, 0x00, 0x87, 0x88, 0x88, 0x00, 0x66, 0x66, 0x66, 0x88, 0x00, 0x00, 0x00, 0x00
};

//	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,

char baie_haye_RS6[544] = {
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x36,//37 * 16 = 592 = 0x250
	0x00, 0x00, 0x60, 0x33, 0x00, 0x00, 0x60, 0x33, 0x00, 0x00, 0x37, 0x33, 0x00, 0x00, 0x37, 0x33,// offset = 0x530
	0x00, 0x70, 0x33, 0x33, 0x00, 0x70, 0x33, 0x33, 0x00, 0x70, 0x33, 0x33, 0x22, 0x22, 0x23, 0x33,
	0x33, 0x32, 0x33, 0x33, 0x33, 0x33, 0x33, 0x43, 0x33, 0x33, 0x33, 0x43, 0x33, 0x33, 0x33, 0x43,
	0x33, 0x33, 0x33, 0x43, 0x33, 0x33, 0x33, 0x44, 0x33, 0x33, 0x33, 0x74, 0x44, 0x44, 0x44, 0x55,
	0x44, 0x44, 0x44, 0x55, 0x44, 0x44, 0x54, 0x55, 0x44, 0x77, 0x55, 0x55, 0x74, 0x55, 0x55, 0x55,
	0x57, 0x55, 0x55, 0x55, 0x57, 0x55, 0x55, 0x55, 0x55, 0x55, 0x55, 0x55, 0x55, 0x65, 0x77, 0x67,
	0x55, 0x65, 0x77, 0x77, 0x55, 0x65, 0x76, 0x77, 0x55, 0x55, 0x66, 0x88, 0x55, 0x55, 0x65, 0x66,
	0x55, 0x55, 0x65, 0x66, 0x55, 0x55, 0x65, 0x66, 0x55, 0x55, 0x55, 0x66, 0x66, 0x66, 0x66, 0x66,
	0x66, 0x66, 0x66, 0x66, 0x66, 0x66, 0x66, 0x66, 0x66, 0x66, 0x66, 0x66, 0x68, 0x66, 0x66, 0x66,
	0x86, 0x66, 0x66, 0x66, 0x66, 0x68, 0x67, 0x77, 0x66, 0x78, 0x76, 0x77, 0x08, 0x00, 0x00, 0x00,
	0x87, 0x00, 0x00, 0x00, 0x86, 0x00, 0x00, 0x00, 0x76, 0x08, 0x00, 0x00, 0x77, 0x08, 0x00, 0x00,
	0x77, 0x87, 0x00, 0x00, 0x77, 0x87, 0x00, 0x00, 0x77, 0x8C, 0x00, 0x00, 0x00, 0x70, 0x3B, 0x33,
	0x00, 0xC0, 0x3A, 0x33, 0x00, 0xC0, 0xBA, 0x33, 0x00, 0xC0, 0xAA, 0x3B, 0x00, 0xC0, 0xAA, 0xBA,
	0x00, 0x00, 0xAC, 0xAA, 0x00, 0x00, 0xAC, 0xAA, 0x00, 0x00, 0xC0, 0xAA, 0x33, 0x33, 0x43, 0x74,
	0x33, 0x33, 0x43, 0x57, 0x33, 0x33, 0x43, 0x57, 0x33, 0x33, 0x44, 0x57, 0x3B, 0x33, 0xCB, 0x5D,
	0xBA, 0xBB, 0xBB, 0x5D, 0xAA, 0xBA, 0xBB, 0x5D, 0xAA, 0xBA, 0xBB, 0x5C, 0x55, 0x55, 0x55, 0x55,
	0x55, 0x55, 0x55, 0x55, 0x55, 0x55, 0x55, 0x55, 0x55, 0x55, 0x55, 0x55, 0xC5, 0xCB, 0x55, 0x55,
	0xBC, 0xBA, 0x55, 0xB5, 0xBB, 0xAA, 0x5B, 0xBB, 0xBB, 0xAA, 0xBB, 0xAB, 0x55, 0x55, 0x55, 0x66,
	0x55, 0x55, 0x55, 0x66, 0x55, 0x55, 0xC5, 0xD6, 0x55, 0x55, 0xB5, 0xCC, 0x5C, 0x55, 0xBB, 0xCB,
	0xCB, 0x55, 0xBB, 0xCB, 0xBB, 0xBC, 0xBB, 0xCC, 0xBB, 0xBB, 0xBB, 0xCC, 0x66, 0x86, 0x77, 0x77,
	0x66, 0x86, 0x77, 0x77, 0x6D, 0x86, 0x77, 0x77, 0xDC, 0x86, 0x77, 0xC7, 0xCC, 0x8D, 0x77, 0xBC,
	0xDC, 0x8D, 0xCC, 0xBB, 0xCD, 0xED, 0xCC, 0xCC, 0xDC, 0xCE, 0xCC, 0xCC, 0x77, 0xEC, 0x00, 0x00,
	0x77, 0xEC, 0x00, 0x00, 0xC7, 0xEC, 0x00, 0x00, 0xCB, 0xEC, 0x00, 0x00, 0xCB, 0x0E, 0x00, 0x00,
	0xCC, 0x0E, 0x00, 0x00, 0xEC, 0x00, 0x00, 0x00, 0x0E, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xBC,
	0x00, 0x00, 0x00, 0xD0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xAB, 0xBB, 0xCB, 0xDC,
	0xBD, 0xCB, 0xCC, 0xDD, 0xD0, 0xDD, 0xDD, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xBB, 0xAA, 0xBA, 0xBA,
	0xCD, 0xCC, 0xBB, 0xBB, 0xD0, 0xCD, 0xCC, 0xBB, 0x00, 0xE0, 0xEE, 0xCC, 0x00, 0x00, 0x00, 0xEE,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xBB, 0xBB, 0xBB, 0xCC,
	0xBB, 0xBB, 0xCB, 0xCC, 0xBB, 0xCC, 0xCC, 0xEC, 0xCC, 0xCC, 0xEE, 0x0E, 0xEE, 0xEE, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xDD, 0xCE, 0xCC, 0xEE,
	0xED, 0xEE, 0xEE, 0x00, 0x0E, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
};

//	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
//	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,

char baie_haye_RS7[128] = {
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x18, 0x63, 0xFB, 0x7F,//73*16 = 1168 = 0x490
	0x97, 0x7F, 0x14, 0x77, 0xB1, 0x6E, 0x4E, 0x6A, 0xEB, 0x61, 0x68, 0x49, 0x08, 0x3D, 0xBE, 0x53,// offset = 0x770
	0x3B, 0x47, 0xD9, 0x3E, 0x13, 0x26, 0xB1, 0x15, 0x29, 0x11, 0x2B, 0x2A, 0xBD, 0xD9, 0xE8, 0xE8,
	0xD9, 0x00, 0xBC, 0xBB, 0xC3, 0xBF, 0x00, 0xE6, 0xD5, 0xE6, 0xD9, 0x00, 0xE4, 0xE3, 0xE9, 0xE7,
	0xE7, 0xD9, 0x00, 0xEA, 0xDD, 0xE8, 0xD9, 0xFF, 0xDF, 0xE0, 0xED, 0xAD, 0xFF, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xCD, 0xD5, 0x00, 0xE8, 0xDD, 0xDB, 0xD9,
	0x00, 0xE7, 0xD9, 0xE2, 0xE8, 0x00, 0xD6, 0xE3, 0xE2, 0xAD, 0xFF, 0x00, 0xD5, 0x00, 0xE4, 0xE0,
	0xD9, 0xD5, 0xE7, 0xD5, 0xE2, 0xE8, 0x00, 0xD5, 0xE6, 0xE3, 0xE1, 0xD5, 0xAD, 0xFF, 0x00, 0x00
};

//	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,

char baie_haye_RS8[16] = {
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x8D, 0x35, 0x01, 0x00 //82*16 = 1312 = 0x520
};													// offset = 0x800



char nettoyer_slot_RS[1328] ={ 0x00 };

//Emeraude, Rouge-Feu et Vert-Feuille

char baie_haye_ERfVf1[32] = {
	0xC2, 0xBB, 0xD3, 0xBF, 0xFF, 0xFF, 0xFF, 0x03, 0xF9, 0x00, 0x02, 0x01, 0xFE, 0xE9, 0x58, 0x08,// offset = 0x378
	0x1C, 0xEA, 0x58, 0x08, 0x01, 0x00, 0x1E, 0x00, 0x1E, 0x00, 0x55, 0x00, 0x00, 0x00, 0x00, 0x00
};

//	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,

char baie_haye_ERfVf2[4] = {
	0x4A, 0x0B, 0x00, 0x00 // offset = 0x3A8
};

char nettoyer_slot_ERfVf[52] = { 0x00 };

int main(int argc, char **argv)
{
    unsigned char version;
    char *data;
    int offset;
    int datasize;
    int choice;
    char *menu[3];
    
    /* Déterminer la version du jeu */
    version = *argv[0];
    
    /* Menu simple */
    menu[0] = "Quitter";
    menu[1] = "08-K011 Baie HAYE";
    menu[2] = "Effacer baie de la .sav";

    while (1)
    {
        choice = gui_menu_20x2("Baie e-Reader", 3, menu);
        
        if (choice == 0)
            return 0;
        
        /* Sélectionner les données selon le choix et la version */
        if (choice == 1) {
            /* HAYE */
            if (version == 3){
                save_set_data(nettoyer_slot_ERfVf, 52, 4, 0x378);              
		save_set_data(baie_haye_ERfVf1, 32, 4, 0x378);
                save_set_data(baie_haye_ERfVf2, 4, 4, 0x3A8);
		sav_set_byte(0x01, 2, 0x476);//active var_enigma_berry_available pour première distribution de la baie
		}
            else if (version == 4){
                save_set_data(nettoyer_slot_ERfVf, 52, 4, 0x26C);
                save_set_data(baie_haye_ERfVf1, 32, 4, 0x26C);
                save_set_data(baie_haye_ERfVf2, 4, 4, 0x29C);
		}
            else{
                sav_set_data(nettoyer_slot_RS, 1328, 4, 0x2E0);
                sav_set_data(baie_haye_RS1, 32, 4, 0x2E0);//injection par morceaux pour gagner de la place
                sav_set_data(baie_haye_RS2, 80, 4, 0x330);//et éviter le Variable Alloc out of memory error
                sav_set_data(baie_haye_RS3, 16, 4, 0x390);
		sav_set_data(baie_haye_RS4, 128, 4, 0x3D0);
		sav_set_data(baie_haye_RS5, 144, 4, 0x490);
		sav_set_data(baie_haye_RS6, 544, 4, 0x530);
		sav_set_data(baie_haye_RS7, 128, 4, 0x770);
		sav_set_data(baie_haye_RS8, 16, 4, 0x800);
		sav_set_byte(0x01, 2, 0x41A);//active var_enigma_berry_available pour première distribution de la baie
                }
        } else {
            /* Effacer la donner présente dans le .sav */
            if (version == 3){
                save_set_data(nettoyer_slot_ERfVf, 52, 4, 0x378);
		sav_set_byte(0x00, 2, 0x476);//reset var_enigma_berry_available pour première distribution de la baie
		}
            else if (version == 4)
                save_set_data(nettoyer_slot_ERfVf, 52, 4, 0x26C);
            else{
                sav_set_data(nettoyer_slot_RS, 1328, 4, 0x2E0);
		sav_set_byte(0x00, 2, 0x41A);//reset var_enigma_berry_available pour première distribution de la baie
		}
        }
        
        /* Déterminer l'offset selon la version */
        if (version == 1){
            offset = 0x2E0;      /* Rubis/Saphir */
        }else if (version == 3){
            offset = 0x0378;      /* Émeraude */
        }else if (version == 4){
            offset = 0x26C;      /* Rouge Feu/Vert Feuille */
        }else
            return 1;
        
        /* Demander si on continue */
        if (!gui_choice("Injecter une autre\nbaie ?"))
            break;
    }
    
    return 0;
}
